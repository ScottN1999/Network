# CloudWatch

Provides metrics for every services in AWS > metrics variables to monitor (CPUUtilization, NetworkIn...)

Metrics belong to **namespaces** 

**Dimensions** is an attribute of a metric, example could be CPU util > instance id, environment, etc ...

Up to 30 dimensions per metric > metrics have **timestamps**

Can create CloudWatch dashboards of metrics - can create **CloudWatch Custom Metrics** (for the RAM for example)


##  CloudWatch Metric Streams

Continually stream CloudWatch metrics to a destination of your choice, with **near-real-time delivery** and low latency.
  - Kinesis Data Firehose (and then its destinations)
  - 3rd party service provider: Datadog, Dynatrace, New Relic, Splunk, Sumo Logic

Option to **filter metrics** to only stream a subset of them

# CloudWatch Logs

**Log groups:** Arbitrary name, usually representing an application

**Log stream:** instances with application / log files / containers

Can define log expiration policies (never expire, 1 day to 10 years)

Can send them to:
  - S3
  - Kinesis Data Streams
  - Kinesis Data Firehose
  - AWS Lambda
  - OpenSearch

Logs are encrypted by default - can setup KMS-based encryption with your own keys.

## CloudWatch logs - Sources

- SDK, CloudWatch Logs Agent
- Elastic Beanstalk collection of logs from application
- ECS: Collection from function logs
- VPC Flow Logs: VPC specific logs
- API Gateway
- CloudTrail based on filter
- Route53: Log DNS queries

## CloudWatch Logs - Insights

Can be used for querying logs in visualisation and view log lines.

## CloudWatch Logs - S3 Export 

Log data can take up to 12 hours to become available for export > the API call is **CreateExportTask**. Not near-real time or real-time .. use Logs Subscriptions instead.



