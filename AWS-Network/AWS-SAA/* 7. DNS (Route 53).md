# Route 53

**What is DNS**

Domain Name System which translates human friendly hostnames into machine IPs > www.google.com = 172.16.1.3

DNS is the backbone of the internet - there is a hierarchical name stucture

## DNS terms

**Domain Registrar:** Where you register your domain names - Route53, GoDaddy, ...
**DNS Records:** A,AAAA,CNAME,NS, ...
**Zone file:** Contains all the DNS records - how to match hostnames to addresses
**Name server:** Resolves DNS queries (Authoritative or non-authoritative)
**Top Level Domain (TLD):** .com, .gov, .org
**Second Level Domain (SLD):** amazon.com, google.com

<img width="250" alt="image" src="https://github.com/UpheldSmile/Virtual-Network/assets/49825639/b44a9884-e0ac-4aa1-9e1c-83f7cfba5f68">

## How DNS works

<img width="447" alt="image" src="https://github.com/UpheldSmile/Virtual-Network/assets/49825639/ac12e284-dae8-4bab-b906-81a5b97396e1">

Your web browser will ask your local DNS server (managed by ISP/your company) if it has ever seen the example.com domain - if it has not been cache'd it will then ask the root dns and recursively find it, each DNS server provides some details (e.g. The root dns server will know .com's name server is IP: 1.2.3.4)

## Route 53

High available, scalable, full managed and _authoritative DNS_
  - **Authorative** = the customer (you) can update the DNS records

Route 53 is also a domain registrar, it has the ability to check the health of your resources (it is the only AWS service which provides 100% availability SLA.

<img width="198" alt="image" src="https://github.com/UpheldSmile/Virtual-Network/assets/49825639/81ad3bf0-e51d-43f5-9ee2-cfed60e64d3a">

## Route 53 - Records
How you want to route traffic for a domain
Each record contains:
  - Domain/subdomain - e.g. example.com
  - Record type - e.g A or AAAA
  - Value - e.g 12.42.134.13
  - Routing Policy - how route 53 responds to queries
  - TTL (Time-to-live) - Amount of time the record cached at DNS resolvers

Route 53 Supports the following DNS record types:
- Must know - A, AAAA, CNAME, NS
- Advanced but good to know - CAA, DS, MX, NAPTR, PTR, SOA, TXT, SPF, SRV

## Route 53 - Record types
- A - Maps a hostname to ipv4
- AAAA - Maps a hostname to ipv6
- CNAME - Maps a hostname to another hostname
  - the target is a domain name which must have an A or AAAA record
  - Can't create a CNAME record for the top node a DNS namespace (Zone apex)
  - Example: You can't create for example.com, but you can create for www.example.com

- NS - Name servers for the hosted zone
  - controls how traffic is routed for a domain

## Route 53 - Hosted zones
A container for records that define how to route traffic to a domain and its subdomains. 

- **Public Hosted Zones** - contains records that specify how to route traffic on the internet (public domain names).
application1.mypublicdomain.com

- **Private Hosted Zones** - Contain records that specify how you route traffic with one or more VPCs (private domain names)
application1.company.internal

 $0.5 per month per hosted zone, when registering a domain name you pay at least a minimum of $12 per year

 <img width="460" alt="image" src="https://github.com/UpheldSmile/Virtual-Network/assets/49825639/c157ec38-6b44-4a95-934f-56839aade9b7">

## TTL

High TTL - E.g. 24 hour (most recommended option)
- Less traffic on route 53 ( as it's cache'd on the client)
- Possibly outdated records
_it's recommended if changing DNS records to change the TTL to something low and only do it after the initial ttl has finished (24hr)_

Low TTOL - e.g. 60 seconds
- More traffic on Route 53 ($$)
- Records are outdated for less time
- Easy to change records

Except for alias records, TTL is mandatory for each DNS record
